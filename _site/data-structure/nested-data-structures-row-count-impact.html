<!DOCTYPE html>
<head>
    <!-- Google Tag Manager  -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PXBN5GK');</script>
<!-- End Google Tag Manager -->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="MongoDB and many SaaS integrations use nested structures, which means each attribute (or column) in a table could have its own set of attributes. Depending o...">
<meta name="keywords" content="redshift_destinationpostgres_destinationpanoply_destination,  redshift, amazon redshift, redshift data warehouse, redshift etl, etl to redshift, nested structures, nested json, denesting">
<title>Nested JSON Data Structures & Row Count Impact | Stitch Documentation</title>

<meta property="og:title" content="Nested JSON Data Structures & Row Count Impact | Stitch Documentation" />
<meta property="og:description" content="MongoDB and many SaaS integrations use nested structures, which means each attribute (or column) in a table could have its own set of attributes. Depending o..." />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs" />
<meta property="og:image" content="https://www.stitchdata.com/images/og-site-icon.png" />
<meta property="og:site_name" content="Stitch Docs" />

<meta name="twitter:creator" content="@stitch_data">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@stitch_data" />
<meta name="twitter:image" content="https://www.stitchdata.com/images/og-site-icon.png" />

<meta name=viewport content="width=1100, user-scalable=1">

<!-- STYLESHEETS -->
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="/docs/css/bootstrap.min.css">
<link rel="stylesheet" href="/docs/css/modern-business.css">
<link rel="stylesheet" href="/docs/css/lavish-bootstrap.css">
<link rel="stylesheet" href="/docs/css/customstyles.css">
<link rel="stylesheet" href="/docs/css/theme-stitch.css">
<link rel="stylesheet" href="/docs/css/docsearch.min.css" />
<link rel="stylesheet" href="/docs/stylesheets/screen.css">

<!-- JQUERY -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/docs/js/jquery.navgoco.min.js"></script>

<!-- FAVICONS  -->
<link href="/docs/images/apple-icon-57x57.png" rel="apple-touch-icon" type="image/png" />
<link href="/docs/images/apple-icon-72x72.png" rel="apple-touch-icon" sizes="72x72" type="image/png" />
<link href="/docs/images/apple-icon-114x114.png" rel="apple-touch-icon-precomposed" sizes="114x114" type="image/png" />
<link href="/docs/images/favicon-32x32.png" rel="shortcut icon" type="image/png" />
<link href="/docs/images/favicon-32x32.png" rel="icon" type="image/png" />

<link rel="stylesheet" href="/docs/css/syntax.css">

<!-- TYPEKIT -->
<script src="https://use.typekit.net/hjq2wqe.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>

<style type="text/css">
	.js .fouc {display: none !important;}
</style>

<script type="text/javascript">
	document.documentElement.className = 'js';
</script>

<!-- Begin Inspectlet Embed Code -->
<script type="text/javascript" id="inspectletjs">
window.__insp = window.__insp || [];
__insp.push(['wid', 479657659]);
(function() {
function ldinsp(){if(typeof window.__inspld != "undefined") return; window.__inspld = 1; var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); };
setTimeout(ldinsp, 500); document.readyState != "complete" ? (window.attachEvent ? window.attachEvent('onload', ldinsp) : window.addEventListener('load', ldinsp, false)) : ldinsp();
})();
</script>
<!-- End Inspectlet Embed Code -->

    // <script>
    //     $(document).ready(function() {
    //         // Initialize navgoco with default options
    //         $("#mysidebar").navgoco({
    //             caretHtml: '',
    //             accordion: true,
    //             openClass: 'active', // open
    //             save: false, // leave false or nav highlighting doesn't work right
    //             cookie: {
    //                 name: 'navgoco',
    //                 expires: false,
    //                 path: '/'
    //             },
    //             slide: {
    //                 duration: 400,
    //                 easing: 'swing'
    //             }
    //         });

    //         $("#collapseAll").click(function(e) {
    //             e.preventDefault();
    //             $("#mysidebar").navgoco('toggle', false);
    //         });

    //         $("#expandAll").click(function(e) {
    //             e.preventDefault();
    //             $("#mysidebar").navgoco('toggle', true);
    //         });

    //     });

    // </script>
    
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>

<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PXBN5GK"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<!-- Navigation -->
<nav class="stitch-docs-navbar">
    <div class="nav-left">
        <svg version="1.1" id="stitch_logomark" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 556.9 556.9" style="enable-background:new 0 0 556.9 556.9;" xml:space="preserve" height="38" width="38">
        <style type="text/css">
        .st0{fill:#FFCC00;}
        </style>
        <path class="st0" d="M556.9,219.9V0H0v297.9h382.8v39H0v0v219.9h556.9V258.9H174.1v-39H556.9z M278.3,499.7
        c-15.1,0-27.4-12.3-27.4-27.4c0-15.1,12.3-27.4,27.4-27.4c15.1,0,27.4,12.3,27.4,27.4C305.7,487.5,293.5,499.7,278.3,499.7z
        M401.8,414.9h-247l11.8-39h224L401.8,414.9z M278.3,57.2c15.1,0,27.4,12.3,27.4,27.4c0,15.1-12.3,27.4-27.4,27.4
        c-15.1,0-27.4-12.3-27.4-27.4C250.9,69.4,263.2,57.2,278.3,57.2z M166.7,180.9l-11.8-39h247l-11.1,39H166.7z"></path>
        </svg>
        <a class="navbar-brand" href="/docs/">
            <span class="projectTitle"> Stitch Docs</span>
        </a>
    </div>
    <div class="nav-right">
        <ul class="stitch-nav">
            <!-- entries without drop-downs appear here -->
            
                
                    
                        <li>
                            <a href="https://www.stitchdata.com" target="_blank">stitchdata.com</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="https://github.com/stitchdata/docs#stitch-documentation" target="_blank"><i class="fa fa-github fa-1" aria-hidden="true"></i> Contribute
</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="https://www.stitchdata.com/changelog" target="_blank">Changelog</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="/docs/announcements">Announcements</a>
                        </li>
                    
                
            
            <li>
                <!--start search-->
                <div id="search-demo-container">
                    <input type="text" id="search-input" placeholder="What can we help you find?">
                    <ul id="results-container"></ul>
                </div>
            </li>
        </ul>
    </div>
</nav>


<!-- Page Content -->
<div id="main">
    <div class="sidebar-column">
        
<!-- UI: page/button/section names, menu paths, etc -->


<!-- Simplifies internal links -->


<!-- Stitch -->


<!-- UI Icons -->


<!-- Mapping of Stitch replication/system columns -->



<!-- Rejected Record table details & schema -->



<!-- Stitch IP addresses  -->



<div class="menu-list">

<ul id="mysidebar" class="nav">
        <!-- Stitch status widget -->
        <a class="status-page" href="http://status.stitchdata.com" target="_blank">
            <span class="color-dot"></span>
            <span class="color-description"></span>
        </a>

        
            <!-- Top-level items -->
            
                
                <li>
                    <a href="/docs/getting-started">Getting Started</a>
                
                
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#account--security" aria-expanded="false" aria-controls="account--security">
                        Account & Security 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="account--security">
                        
                            

                                <li>
                                    <a href="/docs/account-security/">Your Stitch Account</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs">Account Settings</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/account-security/managing-team-members">Invite Your Team</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/account-security/billing-faq">Billing</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/account-security/understanding-stitch-billing-replicated-rows">Understand Your Usage</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/account-security/stitch-security">Security</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/account-security/cancelling-your-stitch-account">Cancel Your Account</a>
                                </li>

                                

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#destinations" aria-expanded="false" aria-controls="destinations">
                        Destinations 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="destinations">
                        
                            

                                <li>
                                    <a href="/docs/destinations">Overview</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/destinations/choosing-a-stitch-destination">Choosing a Destination</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/destinations/redshift/">Amazon Redshift</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/destinations/bigquery/">Google BigQuery</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/destinations/panoply/">Panoply.io</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/destinations/postgresql/">PostgreSQL</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/destinations/snowflake/">Snowflake</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/destinations/switching-destinations">Change Destinations</a>
                                </li>

                                

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#saas-integrations" aria-expanded="false" aria-controls="saas-integrations">
                        SaaS Integrations 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="saas-integrations">
                        
                            
                                <li class="subfolders">

                                    <a data-toggle="collapse" href="#certified-integrations" aria-expanded="false" aria-controls="certified-integrations">
                                        Certified Integrations 
                                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                    </a>

                                    <ul class="collapse" id="certified-integrations">
                                    <!-- Third-level items -->
                                    
                                        <li>
                                            <a href="/docs/integrations/saas#stitch-certified-integrations">Overview</a>
                                         </li>
                                    

                                    <!-- Currently only applies to SaaS Integrations. 
                                        This may change in the future. -->

                                        

                                            

                                            

                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/adroll">AdRoll</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/desk">Desk</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/facebook-ads">Facebook Ads</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/google-adwords">Google Adwords</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/google-analytics">Google Analytics</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/google-ecommerce">Google ECommerce</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/hubspot/">HubSpot</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/import-api/">Import API</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/intercom">Intercom</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/jira">JIRA</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/marketo">Marketo</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/mixpanel">Mixpanel</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/netsuite">NetSuite</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/pardot">Pardot</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/quickbooks">QuickBooks</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/recurly">Recurly</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/salesforce/">Salesforce</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/shopify">Shopify</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/stripe">Stripe</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/trello">Trello</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/xero">Xero</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/zendesk">Zendesk</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/zuora">Zuora</a>
                                                </li>
                                            
                                        

                                    </ul>
                                </li>

                            
                        
                            
                                <li class="subfolders">

                                    <a data-toggle="collapse" href="#community-integrations" aria-expanded="false" aria-controls="community-integrations">
                                        Community Integrations 
                                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                    </a>

                                    <ul class="collapse" id="community-integrations">
                                    <!-- Third-level items -->
                                    
                                        <li>
                                            <a href="/docs/integrations/saas#stitch-community-integrations
">Overview</a>
                                         </li>
                                    

                                    <!-- Currently only applies to SaaS Integrations. 
                                        This may change in the future. -->

                                        

                                            

                                            

                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/autopilot">Autopilot</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/braintree">Braintree</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/freshdesk">Freshdesk</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/gitlab">GitLab</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/harvest">Harvest</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/outbrain">Outbrain</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/referral-saasquatch">Referral SaaSquatch</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/shippo">Shippo</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/square">Square</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/taboola">Taboola</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/urban-airship">Urban Airship</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/wootric">Wootric</a>
                                                </li>
                                            
                                                <li>
                                                    <a href="/docs/integrations/saas/zendesk-chat">Zendesk Chat</a>
                                                </li>
                                            
                                        

                                    </ul>
                                </li>

                            
                        
                            

                                <li>
                                    <a href="/docs/integrations/saas">All SaaS Integrations</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/integrations">All Integrations</a>
                                </li>

                                

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#database-integrations" aria-expanded="false" aria-controls="database-integrations">
                        Database Integrations 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="database-integrations">
                        
                            

                                <li>
                                    <a href="/docs/integrations/databases">Overview</a>
                                </li>

                                
                                    

                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/amazon-aurora">Amazon Aurora</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/amazon-rds">Amazon RDS</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/google-cloudsql-mysql">Google CloudSQL MySQL</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/google-cloudsql-postgresql">Google CloudSQL PostgreSQL</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/heroku">Heroku</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/magento">Magento</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/mariadb">MariaDB</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/microsoft-sql-server">Microsoft SQL Server</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/mongodb">MongoDB</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/microsoft-azure">Microsoft Azure</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/mysql">MySQL</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/databases/postgresql">PostgreSQL</a>
                                            </li>
                                        
                                    

                                    <li>
                                        <a href="/docs/integrations">All Integrations</a>
                                    </li>

                                

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#webhook-integrations" aria-expanded="false" aria-controls="webhook-integrations">
                        Webhook Integrations 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="webhook-integrations">
                        
                            

                                <li>
                                    <a href="/docs/integrations/webhooks">Overview</a>
                                </li>

                                
                                    

                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/aftership">AfterShip</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/branch">Branch</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/contentful">Contentful</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/customerio">Customer.io</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/delighted">Delighted</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/drip">Drip</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/formkeep">FormKeep</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/iterable">Iterable</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/mailjet">Mailjet</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/mandrill">Mandrill</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/particleio">Particle.io</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/segment">Segment</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/sendgrid">SendGrid</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/sendwithus">SendWithUs</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/sparkpost">SparkPost</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/stitch-incoming-webhooks">Incoming Webhooks</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/vero">Vero</a>
                                            </li>
                                        
                                    
                                        
                                            <li>
                                                <a href="/docs/integrations/webhooks/zapier">Zapier</a>
                                            </li>
                                        
                                    

                                    <li>
                                        <a href="/docs/integrations">All Integrations</a>
                                    </li>

                                

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#import-api" aria-expanded="false" aria-controls="import-api">
                        Import API 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="import-api">
                        
                            

                                <li>
                                    <a href="/docs/integrations/import-api">Overview</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/integrations/import-api#auth">Authentication</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/integrations/import-api#return-codes">Return Codes</a>
                                </li>

                                

                            
                        
                            
                                <li class="subfolders">

                                    <a data-toggle="collapse" href="#methods" aria-expanded="false" aria-controls="methods">
                                        Methods 
                                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                    </a>

                                    <ul class="collapse" id="methods">
                                    <!-- Third-level items -->
                                    
                                        <li>
                                            <a href="/docs/integrations/import-api#status-method">Status</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/integrations/import-api#validate-method">Validate</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/integrations/import-api#upsert-method">Upsert</a>
                                         </li>
                                    

                                    <!-- Currently only applies to SaaS Integrations. 
                                        This may change in the future. -->

                                        

                                    </ul>
                                </li>

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#extracting-data" aria-expanded="false" aria-controls="extracting-data">
                        Extracting Data 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="extracting-data">
                        
                            
                                <li class="subfolders">

                                    <a data-toggle="collapse" href="#replicate-data" aria-expanded="false" aria-controls="replicate-data">
                                        Replicate Data 
                                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                    </a>

                                    <ul class="collapse" id="replicate-data">
                                    <!-- Third-level items -->
                                    
                                        <li>
                                            <a href="/docs/replication/syncing-data">Select Data to Replicate</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/replication/syncing-new-additional-columns">Replicate New & Additional Columns</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/replication/replicating-database-views">Database Views</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/replication/syncing-historical-saas-data-resetting-replication-keys">Historical SaaS Data</a>
                                         </li>
                                    

                                    <!-- Currently only applies to SaaS Integrations. 
                                        This may change in the future. -->

                                        

                                    </ul>
                                </li>

                            
                        
                            
                                <li class="subfolders">

                                    <a data-toggle="collapse" href="#replication-keys" aria-expanded="false" aria-controls="replication-keys">
                                        Replication Keys 
                                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                    </a>

                                    <ul class="collapse" id="replication-keys">
                                    <!-- Third-level items -->
                                    
                                        <li>
                                            <a href="/docs/replication/replication-keys">Database Replication Keys</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs">MongoDB Replication Keys</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/replication/replication-keys#resetting-replication-keys">Reset Replication Keys</a>
                                         </li>
                                    

                                    <!-- Currently only applies to SaaS Integrations. 
                                        This may change in the future. -->

                                        

                                    </ul>
                                </li>

                            
                        
                            
                                <li class="subfolders">

                                    <a data-toggle="collapse" href="#replication-methods" aria-expanded="false" aria-controls="replication-methods">
                                        Replication Methods 
                                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                    </a>

                                    <ul class="collapse" id="replication-methods">
                                    <!-- Third-level items -->
                                    
                                        <li>
                                            <a href="/docs/replication/replication-methods">Overview</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/replication/replication-methods#incremental-replication">Incremental</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/replication/replication-methods#append-only-incremental-replication">Append-Only</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/replication/replication-methods#full-table-replication">Full Table</a>
                                         </li>
                                    

                                    <!-- Currently only applies to SaaS Integrations. 
                                        This may change in the future. -->

                                        

                                    </ul>
                                </li>

                            
                        
                            

                                <li>
                                    <a href="/docs/replication/replication-frequency">Replication Frequency</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/replication/supported-data-types">Supported Data Types</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/replication/replication-methods#deleted-records--incremental-replication">Deletions</a>
                                </li>

                                

                            
                        
                            
                                <li class="subfolders">

                                    <a data-toggle="collapse" href="#monitoring-progress" aria-expanded="false" aria-controls="monitoring-progress">
                                        Monitoring Progress 
                                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                                    </a>

                                    <ul class="collapse" id="monitoring-progress">
                                    <!-- Third-level items -->
                                    
                                        <li>
                                            <a href="/docs/replication/monitoring-replication-progress">Progress Summary</a>
                                         </li>
                                    
                                        <li>
                                            <a href="/docs/replication/integration-extraction-logs">Extraction Logs</a>
                                         </li>
                                    

                                    <!-- Currently only applies to SaaS Integrations. 
                                        This may change in the future. -->

                                        

                                    </ul>
                                </li>

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#loading-data" aria-expanded="false" aria-controls="loading-data">
                        Loading Data 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="loading-data">
                        
                            

                                <li>
                                    <a href="/docs/data-structure/integration-schemas">Integration Schemas</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/data-structure/loading-stitch-data-into-destinations">Loading Data into Destinations</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/data-structure/nested-data-structures-row-count-impact">Nested Data & Row Counts</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/data-structure/table-structural-changes">Table Schema Changes</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/data-structure/querying-append-only-tables">Append-Only Tables</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/data-structure/identifying-rejected-records">Rejected Records</a>
                                </li>

                                

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#analysis-integrations" aria-expanded="false" aria-controls="analysis-integrations">
                        Analysis Integrations 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="analysis-integrations">
                        
                            

                                <li>
                                    <a href="/docs/analysis-integrations#analytics-integrations">Analytics</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/analysis-integrations#sql-editors">SQL Edtiors</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/analysis-integrations#data-science">Data Science</a>
                                </li>

                                

                            
                         
                    </ul>
                
                </li>
            
                
                <li>
                    <a data-toggle="collapse" href="#troubleshooting" aria-expanded="false" aria-controls="troubleshooting">
                        Troubleshooting 
                        <i class="fa fa-caret-down fa-1 pull-right" aria-hidden="true"></i>
                    </a>
                    
                
                
                
                    <ul class="collapse" id="troubleshooting">
                        
                            

                                <li>
                                    <a href="/docs/troubleshooting/account">Account & Billing</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/troubleshooting/destinations">Destinations</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/troubleshooting/integrations">Integrations</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/troubleshooting/replication">Replication</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/troubleshooting/data-discrepancies">Data Discrepancies</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/troubleshooting/error-notifications">Error Notifications</a>
                                </li>

                                

                            
                        
                            

                                <li>
                                    <a href="/docs/troubleshooting/">All Troubleshooting</a>
                                </li>

                                

                            
                         
                    </ul>
                
                </li>
            
        
    </ul>
</div>
    </div>
    <div class="content-column">
        
        <div class="article">
            
        <div class="breadbox">
            <div class="breadcrumb-container">
                <div id="breadcrumb-menu" class="menu-left">
                    <!-- Credit to JoostS for this code: https://stackoverflow.com/questions/9612235/what-are-some-good-ways-to-implement-breadcrumbs-on-a-jekyll-site -->




<a href="/docs">DOCS</a>

  
    > <a href="/docs/data-structure/">DATA STRUCTURE</a>
  

  
    > <strong>NESTED JSON DATA STRUCTURES & ROW COUNT IMPACT</strong>
  


                </div>

                
            </div>
        </div>
        
            <div class="post-header">
    <h1 class="post-title-main">Nested JSON Data Structures & Row Count Impact</h1>
</div>

<div class="post-content">
<!-- Controls display of page summary -->
   

<!-- Table of Contents -->
    
        
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>
    

  
<!-- UI: page/button/section names, menu paths, etc -->

<!-- Simplifies internal links -->

<!-- Stitch -->

<!-- UI Icons -->

<!-- Mapping of Stitch replication/system columns -->

<!-- Rejected Record table details & schema -->

<!-- Stitch IP addresses  -->

<div class="alert alert-warning" role="alert"><i class="fa fa-warning"></i> <b>Important:</b> <br />
<strong>BigQuery destinations:</strong> This article is not applicable to BigQuery, as it natively supports nested structures. When Stitch encounters nested data from sources like MongoDB, that data is persisted into BigQuery with its structure <strong>intact.</strong> Because these rows are not denested, there is no additional impact on row counts when replicating these records.<br /><br />
<strong>Postgres <code class="highlighter-rouge">ARRAY</code> &amp; <code class="highlighter-rouge">JSON</code> datatypes:</strong> The info in this article is <strong>NOT</strong> applicable to Postgres <code class="highlighter-rouge">ARRAY</code> and <code class="highlighter-rouge">JSON</code> data types. These data types will be stored as <code class="highlighter-rouge">strings</code> in your data warehouse, whether it’s Postgres, Panoply, or Redshift.</div>

<p>To understand how Stitch interprets the data it receives, you need to know a little bit about JSON.</p>

<p>MongoDB and many SaaS integrations use nested structures, which means each attribute (or column) in a table could have its own set of attributes. Stitch is designed to deconstruct these nested structures into separate tables to easily query the data.</p>

<p>In this article, we’ll cover:</p>

<ul>
  <li>JSON data structures</li>
  <li>How nested structures are deconstructed</li>
  <li>How to connect subtables to top level records</li>
  <li>How nested structures impact row count</li>
</ul>

<hr />

<h2 id="json-data-structures">JSON Data Structures</h2>
<p>When Stitch pulls data from an integration, it’s pulling a series of JSON records. JSON records can contain structures called <strong>objects</strong> and <strong>arrays</strong>.</p>

<h3 id="json-objects">Objects</h3>
<p>An object is an unordered set of name and value pairs; each set is called a property. Objects begin with a left curly bracket ( <code class="highlighter-rouge">{</code> ) and end with a right curly bracket ( <code class="highlighter-rouge">}</code> ).</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">  
   </span><span class="s2">"product_id"</span><span class="p">:</span><span class="s2">"5008798"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Awesome Dino Shirt"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"price"</span><span class="p">:</span><span class="s2">"5.99"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"attributes"</span><span class="p">:{</span><span class="w">               </span><span class="err">//</span><span class="w"> </span><span class="err">object</span><span class="w"> </span><span class="err">begins</span><span class="w">
      </span><span class="s2">"color"</span><span class="p">:</span><span class="s2">"blue"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"size"</span><span class="p">:</span><span class="s2">"large"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"clothing"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"ounces"</span><span class="p">:</span><span class="s2">"5"</span><span class="w">
   </span><span class="p">}</span><span class="w">                           </span><span class="err">//</span><span class="w"> </span><span class="err">object</span><span class="w"> </span><span class="err">ends</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>When Stitch receives an object, the properties in the object are “flattened” into the table and columns are created. Columns created from object properties follow this naming convention: <code class="highlighter-rouge">[object_name]__[property_name]</code></p>

<p>If a table were created for the object in the example above, the schema would look like this:</p>

<table>
  <thead>
    <tr>
      <th>product_id</th>
      <th>name</th>
      <th>price</th>
      <th>attributes__color</th>
      <th>attributes__size</th>
      <th>attributes__type</th>
      <th>attributes__ounces</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>5008798</td>
      <td>Awesome Dino Shirt</td>
      <td>5.99</td>
      <td>blue</td>
      <td>large</td>
      <td>clothing</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<h3 id="json-arrays">Arrays</h3>
<p>An array is an ordered collection of values. Values are separated by commas and can be a string (contained in double quotes), numbers, boolean, an object, or another array. Arrays begin with a left square bracket ( <code class="highlighter-rouge">[</code> ) and end with a right square bracket ( <code class="highlighter-rouge">]</code> ).</p>

<p>Here’s an example:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"100"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"line_items"</span><span class="p">:[</span><span class="w">            </span><span class="err">//</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">begins</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="s2">"product_id"</span><span class="p">:</span><span class="s2">"5008798"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"price"</span><span class="p">:</span><span class="s2">"5.99"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">                        </span><span class="err">//</span><span class="w"> </span><span class="err">array</span><span class="w"> </span><span class="err">ends</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>When Stitch receives a nested array - or an array that’s inside a JSON record - like the one above, it will “denest” it from the parent structure and create a subtable.</p>

<hr />

<h2 id="deconstructing-nested-structures">Deconstruction of Nested Arrays</h2>

<p>To give you a better understanding of how Stitch denests arrays, we’ll walk you through an example using a Shopify order record. In this example, the order record is composed of three parts:</p>

<ul>
  <li>Core order data</li>
  <li>Line items</li>
  <li>Tax lines</li>
</ul>

<p>Here’s what the JSON for the Shopify order looks like:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="s2">"2015-01-01 00:00:00"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="s2">"100"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"line_items"</span><span class="p">:[</span><span class="w">                         </span><span class="err">//</span><span class="w"> </span><span class="err">line</span><span class="w"> </span><span class="err">item</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">begins</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="s2">"product_id"</span><span class="p">:</span><span class="s2">"5008798"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"price"</span><span class="p">:</span><span class="s2">"5.99"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"tax_lines"</span><span class="p">:[</span><span class="w">                    </span><span class="err">//</span><span class="w"> </span><span class="err">tax</span><span class="w"> </span><span class="err">line</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">begins</span><span class="w">
            </span><span class="p">{</span><span class="w">
               </span><span class="s2">"price"</span><span class="p">:</span><span class="s2">"5.99"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"rate"</span><span class="p">:</span><span class="s2">"0.06"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"title"</span><span class="p">:</span><span class="s2">"State Tax"</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">]</span><span class="w">                               </span><span class="err">//</span><span class="w"> </span><span class="err">tax</span><span class="w"> </span><span class="err">line</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">ends</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">                                    </span><span class="err">//</span><span class="w"> </span><span class="err">line</span><span class="w"> </span><span class="err">item</span><span class="w"> </span><span class="err">record</span><span class="w"> </span><span class="err">ends</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>This record contains three levels of data due to the nested arrays. Stitch will denest the arrays from the top level record - in this case, the core order info - and create subtables. <strong>From this one order record, three tables will be created:</strong></p>

<ul>
  <li><code class="highlighter-rouge">orders</code> - This table contains the core order data: order ID, created timestamp, and customer ID.</li>
  <li><code class="highlighter-rouge">orders__line_items</code> - This table contains the line item info: product ID, price, and quantity.</li>
  <li><code class="highlighter-rouge">orders__line_items__tax_lines</code> - This table contains the tax line info: price, rate, and title.</li>
</ul>

<hr />

<h2 id="connecting-subtables-to-top-level-records">Connecting Subtables to Top Level Records</h2>

<p>When subtables are created, Stitch will append a few columns to be used as composite keys that enable you to connect subrecords back to their parent. Let’s take a look at the schemas for each of the Shopify tables to get a better idea of how this works.</p>

<h3 id="top-level">Top Level: Core Order Data</h3>

<p>This table contains the order record’s Primary Key, <code class="highlighter-rouge">order_id</code>.</p>

<table>
  <thead>
    <tr>
      <th>order_id [pk]</th>
      <th>created_at</th>
      <th>customer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1234</td>
      <td>2015-01-01 00:00:00</td>
      <td>100</td>
    </tr>
  </tbody>
</table>

<h3 id="second-level">Second Level: Line Items</h3>

<p>In addition to the attributes in the nested record - in this case, product ID, price, and quantity for line items - Stitch will add these columns to second level tables:</p>

<ul>
  <li><code class="highlighter-rouge">_sdc_source_key</code> - This contains the top level record’s Primary Key. In this example, the column would be <code class="highlighter-rouge">_sdc_source_key_order_id</code>.</li>
  <li>
    <p><code class="highlighter-rouge">_sdc_level_0_id</code> - This forms part of a composite primary key for this row and can be used to associate further down the line nested rows to this parent. This will auto-increment for each unique record in the table, beginning with 0. When used with the `_sdc_source_key column, it creates a unique identifier for the row.</p>

    <p>For the Shopify example, the value for the first line item record would be 0, the second 1, the third 2, and so on.</p>

    <p><strong>We recommend always joining the top level table to the nested table</strong> - this will allow you to avoid queries that may have outdated data.</p>
  </li>
</ul>

<p>Here’s what the <code class="highlighter-rouge">orders__line_items</code> table would look like if another line item were added to the order record:</p>

<table>
  <thead>
    <tr>
      <th>_sdc_source_key_order_id</th>
      <th> </th>
      <th>product_id</th>
      <th>price</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1234</td>
      <td>0</td>
      <td>5008798</td>
      <td>5.99</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1234</td>
      <td>1</td>
      <td>3445689</td>
      <td>10.99</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>If you wanted to return all line items for order number <code class="highlighter-rouge">1234</code>, you’d run the following query:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql">     <span class="k">SELECT</span> <span class="o">*</span>
     <span class="k">FROM</span> <span class="n">orders__line_items</span> <span class="n">li</span>
     <span class="k">WHERE</span> <span class="n">_sdc_source_key_order_id</span> <span class="o">=</span> <span class="mi">1234</span></code></pre></figure>

<h3 id="third-level">Third Level: Tax Lines</h3>

<p>In addition to the attributes in the nested record - in this case, price, rate, and title for tax lines - Stitch will add these columns to third level tables:</p>

<ul>
  <li><code class="highlighter-rouge">_sdc_source_key</code> - This contains the top level record’s Primary Key. In this example, the column would be <code class="highlighter-rouge">_sdc_source_key_order_id</code>.</li>
  <li><code class="highlighter-rouge">_sdc_level_0_id</code> - This is the foreign key for the second level (<code class="highlighter-rouge">orders__line_items</code>) table. Combined with the source key (<code class="highlighter-rouge">_sdc_source_key_order_id</code>), it can be used to find the parent.</li>
  <li>
    <p><code class="highlighter-rouge">_sdc_level_1_id</code> - This forms part of a composite primary key for this row and can be used to associate further down the line nested rows to this parent.</p>

    <p>For the Shopify example, the first tax line record would be 0, the second 1, the third 2, and so on.</p>
  </li>
</ul>

<p>Here’s what the <code class="highlighter-rouge">orders__line_items__tax_lines</code> table would look like if we added another tax line were added to the order record:</p>

<table>
  <thead>
    <tr>
      <th>_sdc_source_key_order_id</th>
      <th>_sdc_level_0_id</th>
      <th>_sdc_level_1_id</th>
      <th>price</th>
      <th>rate</th>
      <th>title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1234</td>
      <td>0</td>
      <td>0</td>
      <td>5.99</td>
      <td>.06</td>
      <td>State Tax</td>
    </tr>
    <tr>
      <td>1234</td>
      <td>1</td>
      <td>0</td>
      <td>10.99</td>
      <td>.06</td>
      <td>State Tax</td>
    </tr>
  </tbody>
</table>

<p>If we wanted to return all line items and tax lines for order number <code class="highlighter-rouge">1234</code>, we’d run the following query:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql">     <span class="k">SELECT</span> <span class="o">*</span>
     <span class="k">FROM</span> <span class="n">orders__line_items</span> <span class="n">li</span>
     <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">orders__line_items__tax_lines</span> <span class="n">tl</span>
     <span class="k">ON</span> <span class="n">tl</span><span class="p">.</span><span class="n">__sdc_level_0_id</span> <span class="o">=</span> <span class="n">li</span><span class="p">.</span><span class="n">__sdc_level_0_id</span>
     <span class="k">AND</span> <span class="n">tl</span><span class="p">.</span><span class="n">__sdc_source_key_order_id</span> <span class="o">=</span> <span class="n">li</span><span class="p">.</span><span class="n">__sdc_source_key_order_id</span>
     <span class="k">WHERE</span> <span class="n">_sdc_source_key_order_id</span> <span class="o">=</span> <span class="mi">1234</span></code></pre></figure>

<hr />

<h2 id="impact-on-total-row-count">Impact on Total Row Count</h2>

<p>Because Stitch is built to denest nested arrays into separate tables, <strong>you can expect to see more rows in Stitch and in your data warehouse than what’s in the source itself</strong>.</p>

<p>To sum it up: row count in original data source ≠ the row count reflected in the Stitch app or your data warehouse.</p>

<p>Consider the Shopify example. Order 1234 isn’t just a just a single row in the data warehouse. Because Stitch had to denest subrecords and create tables to accommodate these records, you can expect to see more than just one row for order 1234 moving through Stitch.</p>

<p>From the top level record, there’s the row in the <code class="highlighter-rouge">orders</code> table:</p>

<table>
  <thead>
    <tr>
      <th>order_id [pk]</th>
      <th>created_at</th>
      <th>customer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1234</td>
      <td>2015-01-01 00:00:00</td>
      <td>100</td>
    </tr>
  </tbody>
</table>

<p>From the second level record, we have the rows in the <code class="highlighter-rouge">orders__line_items</code> table:</p>

<table>
  <thead>
    <tr>
      <th>_sdc_source_key_order_id</th>
      <th> </th>
      <th>product_id</th>
      <th>price</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1234</td>
      <td>0</td>
      <td>5008798</td>
      <td>5.99</td>
      <td>1</td>
    </tr>
    <tr>
      <td>1234</td>
      <td>1</td>
      <td>3445689</td>
      <td>10.99</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p>From the third level record, we have the rows in the <code class="highlighter-rouge">orders__line_items__tax_lines</code> table:</p>

<table>
  <thead>
    <tr>
      <th>_sdc_source_key_order_id</th>
      <th>_sdc_level_0_id</th>
      <th>_sdc_level_1_id</th>
      <th>price</th>
      <th>rate</th>
      <th>title</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1234</td>
      <td>0</td>
      <td>0</td>
      <td>5.99</td>
      <td>.06</td>
      <td>State Tax</td>
    </tr>
    <tr>
      <td>1234</td>
      <td>1</td>
      <td>0</td>
      <td>10.99</td>
      <td>.06</td>
      <td>State Tax</td>
    </tr>
  </tbody>
</table>

<p>In total, Stitch will count each of these rows (a total of 5) towards your row count. So while there is only one record in the Shopify data source, inside of Stitch you’ll see 5 replicated rows and there’ll be 5 rows in your data warehouse.</p>

<hr />

<h2 id="reduce-your-row-count">Reducing Your Row Count</h2>

<p>Understanding how Stitch handles nested data structures will in turn give you a deeper understanding of how your data is structured once it gets to your data warehouse. While this knowledge will help comprehending the data’s structure, what about applying it to how many rows you’re using? How can you plan ahead?</p>

<ul>
  <li><strong>For starters</strong>, check out the <a href="/docs/account-security/understanding-stitch-billing-replicated-rows#reducing-your-usage">Reducing Your Row Count</a> guide for detailed tips and gotchas on how to keep your row count in line.</li>
  <li>
    <p><strong>Take some time to learn about how the data for your integrations is structured and how it’s replicated.</strong></p>

    <p>Check out the <a href="/docs/integrations/saas">SaaS Schemas section</a> for detailed info on Replication Methods and the tables you can expect to see for each integration. Every article links to that service’s API documentation, which is the best way to learn about the data for that integration is structured.</p>
  </li>
  <li><strong>Set your integrations to replicate less frequently,</strong> if feasible.</li>
</ul>


<!-- GitHub Feedback snippet -->

    
<!-- UI: page/button/section names, menu paths, etc -->


<!-- Simplifies internal links -->


<!-- Stitch -->


<!-- UI Icons -->


<!-- Mapping of Stitch replication/system columns -->



<!-- Rejected Record table details & schema -->



<!-- Stitch IP addresses  -->





<hr>


<table width="100%" class="related-articles">
    <tbody>
        <tr>
            <td valign="top" width="50%; fixed">
            	<span class="h2">Related</span>
            </td>
            <td valign="top" width="50%; fixed">
            	<span class="h2">Troubleshooting</span>
            </td>
        </tr>
        <tr>
        	<td valign="top">
        		<!-- ACCOUNT & BILLING -->




<!-- DESTINATIONS -->




<!-- INTEGRATIONS -->

<!-- All integrations -->


<!-- Webhook Integrations -->



<!-- Database Integrations -->




<!-- SaaS integrations -->




<!-- REPLICATION -->




<!-- DATA STRUCTURE -->

<ul>
	<li>
		<a href="/docs/data-structure/loading-stitch-data-into-destinations">Loading Data into Your Destination</a>
	</li>
	<li>
		<a href="/docs/data-structure/table-structural-changes">Table Schema Changes</a>
	</li>
	<li>
		<a href="/docs/data-structure/nested-data-structures-row-count-impact">Nested Structures & Row Count Impact</a>
	</li>
	<li>
		<a href="/docs">Querying Append-Only Tables</a>
	</li>
</ul>

        	</td>
        	<td valign="top">
        		<!-- ACCOUNT & BILLING -->




<!-- DESTINATIONS -->




<!-- INTEGRATIONS -->

<!-- Database integration pages only -->



<!-- SaaS integration pages only -->



<!-- All integration pages -->




<!-- REPLICATION -->




<!-- DATA STRUCTURE -->

<ul>
	<li>
		<a href="/docs/troubleshooting/data-discrepancy-troubleshooting-guide">Data Discrepancy Guide</a>
	</li>
	<li>
		<a href="/docs/data-structure/identifying-rejected-records">Identifying Rejected Records</a>
	</li>
	
	
</ul>

        	</td>
        </tr>
    </tbody>
</table>


    <hr>

<span class="h2">Questions? Feedback?</span>

<p>Did this article help? If you have questions or feedback, feel free to <a target="_blank" href="https://github.com/stitchdata/docs/blob/master/_data-structure/nested-data-structures-row-count-impact.md">submit a pull request</a> with your suggestions, <a href="https://github.com/stitchdata/docs/issues" target="new">open an issue on GitHub</a>, or <a href="mailto: help@stitchdata.com">reach out to us</a>.</p>


<!-- Page tags -->
    

    
        <div class="tags">
            <b>Tags: </b>
            
            
                
                    <a href="/docs/tag_redshift_destination" class="btn btn-default navbar-btn cursorNorm" role="button">redshift destination</a>
                
            
                
            
                
                    <a href="/docs/tag_panoply_destination" class="btn btn-default navbar-btn cursorNorm" role="button">panoply destination</a>
                
            
        </div>
    

</div>

<footer>
	&copy;2017 Stitch. All rights reserved. <br />
	 Site last generated: Dec 12, 2017 <br />
	<!--<p><img src="/docs/images/company_logo.png" alt="Company logo"/></p>-->
</footer>



        </div>
    </div>
</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="/docs/js/docsearch.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="//cdn.statuspage.io/se-v2.js"></script>

<script src="/docs/js/toc.js"></script>
<script src="/docs/js/customscripts.js"></script>

<script type="text/javascript">
    $(".fouc").removeClass("fouc");
</script>

<!-- Intercom bubble -->
<script>
  window.intercomSettings = {
    app_id: "okjpf68w"
  };
</script>
<script>
(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/okjpf68w';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()
</script>

<!-- Algolia search -->
<script type="text/javascript">
docsearch({
  apiKey: '436dcd76593779a2261b623269cf5cfd',
  indexName: 'stitchdata',
  inputSelector: '#search-input',
  debug: false, // Set debug to true if you want to inspect the dropdown
  algoliaOptions: {
    hitsPerPage: 10 // Controls how many results display in the dropdown
  }
});
</script>

</body>
</html>