{% assign objects = site.api-files | where:"content-type","embed-object" %}

{% for object in objects %}
    <h3 id="{{ object.endpoint }}">
        {{ object.title | append: "s" }}
    </h3>

        <p>{{ object.description | flatify | markdownify }}</p>

    {% if object.object-attributes %}
        <h4 id="{{ object.title | downcase | append: "--object" }}">
            The {{ object.title }} Object
        </h4>

            <table width="100%; fixed">
                {% for attribute in object.object-attributes %}
                    <tr>
                        <td align="right" width="20%; fixed">
                            <strong>
                                {{ attribute.name }}
                            </strong><br>
                            {{ attribute.type | upcase }}
                        </td>
                        <td>
                            {{ attribute.description | flatify | markdownify }}
                        </td>
                    </tr>
                {% endfor %}
            </table>
    {% endif %}


    {% assign all-endpoints = site.api-files | where:"content-type","embed-endpoint" %}
    {% assign object-endpoints = all-endpoints | where:"endpoint",object.endpoint %}
    {% assign same-version = object-endpoints | where:"version",object.version %}
    {% assign endpoints = same-version | sort:"order" %}

        {% for endpoint in endpoints %}
            {% include api/endpoint.html %}
        {% endfor %}

{% unless forloop.last == true %}
    <hr>
{% endunless %}

{% endfor %}