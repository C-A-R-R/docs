<span class="api-heading">
    <h4 id="{{ endpoint.key }}">
        <span class="api-method {{ endpoint.method }}">
            {{ endpoint.method | flatify | upcase }} 
        </span>

        <span class="api-endpoint">
            {{ endpoint.short-url | flatify }}
        </span>
    </h4>
</span>

    <p>{{ endpoint.description | flatify | markdownify }}</p>

    {% if endpoint.arguments %}
        <h5 id="{{ endpoint.key | append: "--arguments" }}">
            Arguments
        </h5>

            <table width="100%; fixed">
                {% for argument in endpoint.arguments %}
                    <tr>
                        <td align="right" width="20%; fixed">
                            <strong>
                                {{ argument.name }}
                            </strong><br>
                            
                            {% case argument.required %}
                                {% when true %}
                                    <font color="#cc3399">REQUIRED</font>
                                {% else %}
                                    OPTIONAL
                                {% endcase %}
                        </td>
                        <td>
                            {{ argument.description | flatify | markdownify }}
                        </td>
                        
                    </tr>
                {% endfor %}
            </table>
    {% endif %}


    <h5 id="{{ endpoint.key | append: "--returns" }}">
        Returns
    </h5>
        {{ endpoint.returns | flatify | markdownify }}

<ul id="example{{ endpoint.key }}Tabs" class="nav nav-tabs">
    {% for example in endpoint.examples %}
        {% if forloop.first == true %} 
            <li class="active">
        {% else %}
            <li>
        {% endif %}
            <a href="#{{ endpoint.key | append: "-" | append: example.type }}" data-toggle="tab">
            {{ example.type | capitalize }}</a>
        </li>
        {% endfor %}
</ul>
  <div class="tab-content">
    {% for example in endpoint.examples %}
        {% if forloop.first == true %}
            <div role="tabpanel" class="tab-pane active" id="{{ endpoint.key | append: "-" | append: example.type }}">
        {% else %}
            <div role="tabpanel" class="tab-pane" id="{{ endpoint.key | append: "-" | append: example.type }}">
        {% endif %}

        {% case example.type %}
          {% when 'errors' %}
            {% for error in example.errors %}
                <strong>{{ error.type | append: " - " | append: error.name }}</strong><br>
                {% if error.fix-it %}
                    {{ error.fix-it | flatify | markdownify }}
                {% endif %}

{%- capture error-response -%}
```{{ example.language }}
{{ error.code | flatify | rstrip }}
```
{%- endcapture -%}{{ error-response | markdownify }}

{% unless forloop.last == true %}
<hr>
{% endunless %}
          {% endfor %}

          {% else %}

{%- capture example-code -%}
```{{ example.language }}
{{ example.code | flatify | rstrip }}
```
{%- endcapture -%}{{ example-code | markdownify }}

        {% endcase %}

</div>
{% endfor %}
</div>
<br>